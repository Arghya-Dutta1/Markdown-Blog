{% extends "base.html" %}
{% block content %}
<h2>Create a New Post</h2>
<form method="post">
    <input type="text" name="title" id="title" placeholder="Post Title" required><br><br>
    <input type="text" name="tags" id="tags" placeholder="Tags (comma-separated)"><br><br>
    <textarea name="content" id="content" rows="10" placeholder="Write in Markdown..." required></textarea><br>
    <button type="submit">Create Post</button>
</form>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const titleInput = document.getElementById("title");
    const contentInput = document.getElementById("content");
    const tagsInput = document.getElementById("tags");

    // Load saved draft
    if (localStorage.getItem("draftTitle")) {
        titleInput.value = localStorage.getItem("draftTitle");
    }
    if (localStorage.getItem("draftContent")) {
        contentInput.value = localStorage.getItem("draftContent");
    }
    if (localStorage.getItem("draftTags")) {
        tagsInput.value = localStorage.getItem("draftTags");
    }

    // Save draft on input
    titleInput.addEventListener("input", () => {
        localStorage.setItem("draftTitle", titleInput.value);
    });
    contentInput.addEventListener("input", () => {
        localStorage.setItem("draftContent", contentInput.value);
    });
    tagsInput.addEventListener("input", () => {
        localStorage.setItem("draftTags", tagsInput.value);
    });

    // Clear draft on submit
    document.querySelector("form").addEventListener("submit", () => {
        localStorage.removeItem("draftTitle");
        localStorage.removeItem("draftContent");
        localStorage.removeItem("draftTags");
    });
});
</script>
{% endblock %}